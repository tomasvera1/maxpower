<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <label for="cars">Database: </label>
    <select name="cars" id="selector" onchange="showForm()">
        <option value="p_seguridad" selected="1">Seguridad</option>
        <option value="p_electronicos" selected="2">Electronicos</option>
        <option value="p_electricos" selected="3">Electricos</option>
    </select></br>
    <form action="/db" method="POST" id="seg" style="display: none;">

        <label for="name">Nombre: </label><input type="text" name="name" required id="name" ></br>
        <label for="mod">Modelo: </label><input type="text" name="mod" id="mod"></br>
        <label for="marca">Marca: </label><input type="text" name="marca" id="marca"></br>
        <label for="cod">Cod: </label><input type="number" name="cod" id="cod" required></br>
        <label for="desc">Descripción: </label><input type="textarea" name="desc" id="desc" required></br>
        <label for="cat">Categoría</label>
        <select name="cat">
            <option value="Zapatos">Zapatos</option>
        </select></br>
        <input type="file" name="fileupload" value="" id="file" onchange="toBase64()" required><br><br>
        <label for="fileupload"> Select a file to upload</label>
        <input type="text" name="img" hidden id="img">
        <input type="text" name="db" hidden value="p_seguridad">
        <button type="submit">INSERT</button>
    </form>
</body>
<script>
    function toBase64(){
        const file = document.getElementById('file');
        const img = document.getElementById('img');
        const reader = new FileReader();
        reader.onload = () => {
            const base64 = reader.result.split(',')[1];
            img.value = base64;
        };
        reader.readAsDataURL(file.files[0]);
    }
    function showForm(){
        const sel = document.getElementById("selector");
        const db = sel.options[sel.selectedIndex].value;
        if(db == "p_seguridad"){
            document.getElementById("seg").style.display = "block";
        }else if(db == "p_electronicos"){
            document.getElementById("seg").style.display = "none";
        }else if(db == "p_electricos"){
            document.getElementById("seg").style.display = "none";

        }
    }
</script>
</html>